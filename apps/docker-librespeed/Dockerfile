## This file is automatically generated (based on release.json)
##
## Do not changes any lines here
##
####################################
# All rights reserved.              #
# started from Zero                 #
# Docker owned dockserver           #
# Docker Maintainer dockserver      #
#####################################
#####################################
# THIS DOCKER IS UNDER LICENSE      #
# NO CUSTOMIZING IS ALLOWED         #
# NO REBRANDING IS ALLOWED          #
# NO CODE MIRRORING IS ALLOWED      #
#####################################
# shellcheck disable=SC2086
# shellcheck disable=SC2046

LABEL org.opencontainers.image.source="https://github.com/dockserver/container"
FROM ghcr.io/linuxserver/baseimage-alpine-nginx:3.15

ARG TARGETPLATFORM
ARG BUILDPLATFORM
ARG VERSION="5.2.5"
ARG BRANCH="master"

RUN  \
  echo "**** install packages ****" && \
    apk add -U --update --no-cache aria2 jq tar curl php7-ctype php7-gd php7-mysqli php7-pdo_pgsql php7-pdo_sqlite && \
  echo "**** install 'docker-librespeed' ****" && \
    mkdir -p /usr/share/webapps/librespeed && \
    curl -fsSL "https://github.com/librespeed/speedtest/archive/refs/tags/${VERSION}.tar.gz" | tar xzf - -C /usr/share/webapps/librespeed --strip-components=1 && \
  echo "**** cleanup ****" && \
    rm -rf /root/.cache /tmp/*

COPY ./apps/docker-librespeed/root/ /

EXPOSE 80
VOLUME /config
##EOF
